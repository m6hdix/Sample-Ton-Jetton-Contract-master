# راهنمای قفل و آزاد کردن تراکنش‌ها

## پس از دیپلوی قرارداد

### ۱. تنظیم فایل کانفیگ
ابتدا فایل `scripts/transferLockManager.ts` را باز کرده و مقادیر زیر را ویرایش کنید:

```typescript
const MNEMONIC = "کلمات بازیابی کیف پول شما"; // جایگزین کنید
const CONTRACT_ADDRESS = "EQ..."; // آدرس قرارداد دیپلوی شده شما
const API_KEY = "کلید API از toncenter.com"; // اختیاری ولی توصیه می‌شود
```

### ۲. نصب ts-node (در صورت نیاز)
```bash
npm install -g ts-node
```

### ۳. تست قفل تراکنش‌ها

#### قفل کردن تراکنش‌ها:
```bash
npm run lock
```

#### آزاد کردن تراکنش‌ها:
```bash
npm run unlock
```

#### بررسی وضعیت قفل:
```bash
npm run status
```

### ۴. تست دستی انتقال جتون

#### قبل از قفل کردن:
1. ابتدا چند جتون برای تست بسازید:
```bash
npm run start
```
2. در منوی blueprint، گزینه Mint را انتخاب کنید

#### بعد از قفل کردن:
1. سعی کنید جتون را منتقل کنید - باید با خطا مواجه شوید
2. با دستور `npm run unlock` قفل را باز کنید
3. دوباره انتقال را تست کنید - این بار باید موفق باشد

### نکات مهم:
- فقط مالک قرارداد می‌تواند قفل را تغییر دهد
- برای هر عملیات حدود 0.05 TON کارمزد نیاز است
- می‌توانید از شبکه testnet برای تست استفاده کنید
- همیشه وضعیت را با `npm run status` بررسی کنید قبل از انجام تراکنش‌ها

### عیب‌یابی:
اگر با خطای شبکه مواجه شدید:
1. اینترنت خود را بررسی کنید
2. از VPN استفاده کنید
3. یا از endpoint دیگری استفاده کنید:
```typescript
const client = new TonClient({
    endpoint: 'https://testnet.tonhubapi.com'
});
```